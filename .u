#!/bin/sh

# update ubuntu to the latest version
sudo apt update && sudo apt upgrade

# set vim as default editor
sudo update-alternatives --config editor

# setup git
git config --global credential.helper store
git config --global user.name "van@vmDev"
git config --global user.email "-"
git clone https://github.com/lvnfg/dot

# apply dotfiles settings
ln -s ~/dot/.vimrc ~/.vimrc
rm ~/.bashrc
ln -s ~/dot/.bashrc ~/.bashrc

# install xrdp
sudo apt install xrdp
sudo systemctl enable xrdp

# install xfce
sudo apt install --no-install-recommends xfce4
echo "xfce4-session" > ~/.xsession
D=/usr/share/xfce4:/usr/share/xubuntu:/usr/local/share
D=${D}:/usr/share:/var/lib/snapd/desktop:/usr/share
cat <<EOF > ~/.xsessionrc
export XDG_SESSION_DESKTOP=xubuntu
export XDG_DATA_DIRS=${D}
export XDG_CONFIG_DIRS=/etc/xdg/xdg-xubuntu:/etc/xdg:/etc/xdg
EOF
sudo reboot

# install vscode 
# TODO
# point vscode settings to do
# Remove VS Code setting files and snippets
rm ~/Library/Application\ Support/Code/User/settings.json
rm ~/Library/Application\ Support/Code/User/keybindings.json
rm -r ~/Library/Application\ Support/Code/User/snippets
# Create symlinks to VS Code setting files in repos
ln -s ~/Documents/dot/code/settings.json ~/Library/Application\ Support/Code/User/settings.json
ln -s ~/Documents/dot/code/keybindings.json ~/Library/Application\ Support/Code/User/keybindings.json
ln -s ~/Documents/dot/code/snippets ~/Library/Application\ Support/Code/User/snippets